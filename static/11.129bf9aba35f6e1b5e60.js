(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{DyZZ:function(t,e,n){"use strict";n.r(e),n.d(e,"JobListModule",(function(){return G}));var o=n("u9T3"),r=n("SVse"),i=n("PDjf"),s=n("Dxy4"),a=n("5QHs"),c=n("iInd"),l=n("8Y7J"),p=n("qLOZ"),b=n("VDRc"),u=n("1O3W"),d=n("1z/I"),f=n("s7LF");class h{}var m=n("2Vo4"),g=n("XNiG");let y=(()=>{class t{constructor(){this.pJobInfos=null,this.jobInfos$=new m.a(null),this.closeOverlay=new g.a}get jobInfos(){return this.pJobInfos}set jobInfos(t){this.pJobInfos=t,this.jobInfos$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=n("zHaW"),C=n("lGQG"),O=n("AQhQ"),w=n("Q2Ze"),v=n("e6WT"),A=n("bOtU");function M(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," First name is "),l.Rb(2,"strong"),l.Cc(3,"required"),l.Qb(),l.Qb())}function _(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," Last name is "),l.Rb(2,"strong"),l.Cc(3,"required"),l.Qb(),l.Qb())}function P(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," Please enter a valid email address "),l.Qb())}function I(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," Email is "),l.Rb(2,"strong"),l.Cc(3,"required"),l.Qb(),l.Qb())}function R(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," Phone is "),l.Rb(2,"strong"),l.Cc(3,"required"),l.Qb(),l.Qb())}function Q(t,e){1&t&&(l.Rb(0,"mat-error"),l.Cc(1," There was an error. Please try again. "),l.Qb())}let L=(()=>{class t{constructor(t,e,n,o){this.jobApply=t,this.snackBar=e,this.auth=n,this.app=o,this.jobInfos=null,this.subscriptions=[],this.applyForm=new f.d({firstName:new f.b("",[f.p.required]),lastName:new f.b("",[f.p.required]),email:new f.b("",[f.p.required,f.p.email]),phone:new f.b("",[f.p.pattern("[0-9\\s]{10}")]),id_ad:new f.b("",[])}),this.applyError=!1}ngOnInit(){this.subscriptions.push(this.jobApply.jobInfos$.subscribe(t=>{this.jobInfos=t,this.checkIfAuthentified()}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}checkIfAuthentified(){if(this.auth.isAuthenticated){const t=this.auth.userInfos,e=new h;e.email=t.email,e.f_name=t.f_name,e.l_name=t.l_name,e.phone=t.phone,e.id_ad=this.jobInfos.id,this.app.postApplication(e).subscribe(t=>{this.snackBar.open("Successfully applied!","Dismiss",{duration:2e3}),this.closeOverlay()},t=>{this.snackBar.open("You already applied to this job.","Dismiss",{duration:2e3}),this.closeOverlay()})}}closeOverlay(){this.jobApply.closeOverlay.next(!0)}submitForm(){this.applyError=!1,this.app.postApplication(this.applyForm.value).subscribe(t=>{this.snackBar.open("Successfully applied!","Dismiss",{duration:2e3}),this.closeOverlay()},t=>this.applyError=!0)}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(y),l.Lb(j.a),l.Lb(C.a),l.Lb(O.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-job-apply"]],decls:37,vars:10,consts:[[1,"jobApply-wrapper"],[1,"jobApply-title"],[3,"click"],[1,"jobApply-form",3,"formGroup","ngSubmit"],["fxLayout.lt-md","column wrap","fxLayout","row"],["matInput","","formControlName","firstName","placeholder","Michel"],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Rodrigue"],["matInput","","formControlName","email","placeholder","Ex. mrodrigue@outlook.com"],["matInput","","formControlName","phone","placeholder","06 12 34 56 78","mask","00 00 00 00 00"],[1,"jobAdId"],["type","hidden","formControlName","id_ad",3,"value"],[1,"button-wrapper"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"h2"),l.Cc(3),l.Qb(),l.Rb(4,"span",2),l.Zb("click",(function(){return e.closeOverlay()})),l.Cc(5,"\xd7"),l.Qb(),l.Qb(),l.Rb(6,"form",3),l.Zb("ngSubmit",(function(){return e.submitForm()})),l.Rb(7,"div",4),l.Rb(8,"mat-form-field"),l.Rb(9,"mat-label"),l.Cc(10,"First name"),l.Qb(),l.Mb(11,"input",5),l.Ac(12,M,4,0,"mat-error",6),l.Qb(),l.Rb(13,"mat-form-field"),l.Rb(14,"mat-label"),l.Cc(15,"Last name"),l.Qb(),l.Mb(16,"input",7),l.Ac(17,_,4,0,"mat-error",6),l.Qb(),l.Qb(),l.Rb(18,"div"),l.Rb(19,"mat-form-field"),l.Rb(20,"mat-label"),l.Cc(21,"Email"),l.Qb(),l.Mb(22,"input",8),l.Ac(23,P,2,0,"mat-error",6),l.Ac(24,I,4,0,"mat-error",6),l.Qb(),l.Qb(),l.Rb(25,"div"),l.Rb(26,"mat-form-field"),l.Rb(27,"mat-label"),l.Cc(28,"Phone (optional)"),l.Qb(),l.Mb(29,"input",9),l.Ac(30,R,4,0,"mat-error",6),l.Qb(),l.Qb(),l.Rb(31,"div",10),l.Mb(32,"input",11),l.Qb(),l.Ac(33,Q,2,0,"mat-error",6),l.Rb(34,"div",12),l.Rb(35,"button",13),l.Cc(36,"Apply"),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&t&&(l.Ab(3),l.Ec("Apply for ",null==e.jobInfos?null:e.jobInfos.title,""),l.Ab(3),l.kc("formGroup",e.applyForm),l.Ab(6),l.kc("ngIf",e.applyForm.get("firstName").hasError("required")),l.Ab(5),l.kc("ngIf",e.applyForm.get("lastName").hasError("required")),l.Ab(6),l.kc("ngIf",e.applyForm.get("email").hasError("email")&&!e.applyForm.get("email").hasError("required")),l.Ab(1),l.kc("ngIf",e.applyForm.get("email").hasError("required")),l.Ab(6),l.kc("ngIf",e.applyForm.get("phone").hasError("required")),l.Ab(2),l.lc("value",null==e.jobInfos?null:e.jobInfos.id),l.Ab(1),l.kc("ngIf",e.applyError),l.Ab(2),l.kc("disabled",e.applyForm.invalid))},directives:[f.q,f.k,f.e,b.c,w.c,w.f,v.a,f.a,f.j,f.c,r.k,A.a,s.b,w.b],styles:["[_nghost-%COMP%]{height:100%;flex-direction:column;justify-content:center;background:#fff;padding:20px}[_nghost-%COMP%], [_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]{width:100%;flex-direction:column;flex:1}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-title[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;display:flex}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;padding:5px}[_nghost-%COMP%]   .jobApply-wrapper[_ngcontent-%COMP%]   .jobApply-form[_ngcontent-%COMP%]   div.button-wrapper[_ngcontent-%COMP%]{justify-content:center}"]}),t})(),k=(()=>{class t{constructor(t,e,n,o){this.overlay=t,this.overlayPositionBuilder=e,this.job=n,this.jobApply=o,this.jobId=null}ngOnInit(){this.jobApply.closeOverlay.subscribe(t=>{t&&this.overlayRef&&this.overlayRef.detach()})}getOverlayConfig(){const t=this.overlayPositionBuilder.global().centerHorizontally().centerVertically();return new u.d({panelClass:"notification-resume__panel",scrollStrategy:this.overlay.scrollStrategies.block(),hasBackdrop:!0,positionStrategy:t})}showApplicationOverlay(){if(!this.jobId)return;this.overlayRef=this.overlay.create(this.getOverlayConfig());const t=new d.d(L);this.overlayRef.attach(t),this.job.getJobInfo(this.jobId).subscribe(t=>{this.jobApply.jobInfos=t}),this.overlayRef.backdropClick().subscribe(t=>{this.overlayRef.detach()})}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(u.c),l.Lb(u.f),l.Lb(p.a),l.Lb(y))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-job-apply-overlay"]],inputs:{jobId:"jobId"},decls:2,vars:1,consts:[["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(l.Rb(0,"a",0),l.Zb("click",(function(){return e.showApplicationOverlay()})),l.Cc(1,"Apply"),l.Qb()),2&t&&l.kc("disabled",!e.jobId)},directives:[s.a],styles:[""]}),t})();var x=n("pu8Q"),F=n("h/Hl");const S=function(t){return["/job",t]};function E(t,e){if(1&t&&(l.Rb(0,"div",8),l.Rb(1,"mat-card"),l.Rb(2,"mat-card-title"),l.Cc(3),l.Qb(),l.Rb(4,"mat-card-content"),l.Rb(5,"p"),l.Cc(6),l.ec(7,"truncate"),l.Qb(),l.Qb(),l.Rb(8,"mat-card-actions",9),l.Mb(9,"app-job-apply-overlay",10),l.Rb(10,"a",11),l.Cc(11,"Learn more"),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&t){const t=e.$implicit;l.Ab(3),l.Dc(t.title),l.Ab(3),l.Dc(l.gc(7,4,t.desc,250)),l.Ab(3),l.kc("jobId",t.id),l.Ab(1),l.kc("routerLink",l.nc(7,S,t.id))}}function q(t,e){if(1&t&&(l.Rb(0,"div",6),l.Ac(1,E,12,9,"div",7),l.ec(2,"slice"),l.Qb()),2&t){const t=l.dc();l.Ab(1),l.kc("ngForOf",l.hc(2,1,t.jobList,t.sliceStart,t.sliceEnd))}}function z(t,e){1&t&&(l.Rb(0,"div",12),l.Mb(1,"mat-spinner"),l.Qb())}const N=function(){return[5,10,25,100]},D=[{path:"",component:(()=>{class t{constructor(t){this.job=t,this.pageSize=10,this.sliceStart=0,this.sliceEnd=this.sliceStart+this.pageSize,this.jobList=null,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.job.getAllJobs().subscribe(),this.job.jobList$.subscribe(t=>{this.jobList=t}))}ngAfterViewInit(){this.paginator.page.subscribe(t=>{this.pageSize=t.pageSize,this.sliceStart=t.pageIndex*this.pageSize,this.sliceEnd=this.sliceStart+this.pageSize,window.scrollTo({top:0,behavior:"smooth"})})}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(p.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-job-list"]],viewQuery:function(t,e){var n;1&t&&l.Fc(a.a,!0),2&t&&l.pc(n=l.ac())&&(e.paginator=n.first)},decls:7,vars:6,consts:[[1,"jobList-wrapper"],[1,"jobList-container"],["fxLayout","row wrap","fxLayout.lt-md","column",4,"ngIf","ngIfElse"],["jobListLoader",""],[1,"jobList-paginator"],["fxFlex","1 0 100","align","start",3,"length","pageSize","pageSizeOptions"],["fxLayout","row wrap","fxLayout.lt-md","column"],["class","card-wrapper","fxFlex","50",4,"ngFor","ngForOf"],["fxFlex","50",1,"card-wrapper"],["align","end"],[3,"jobId"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"spinner-wrapper"]],template:function(t,e){if(1&t&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Ac(2,q,3,5,"div",2),l.Ac(3,z,2,0,"ng-template",null,3,l.Bc),l.Qb(),l.Rb(5,"div",4),l.Mb(6,"mat-paginator",5),l.Qb(),l.Qb()),2&t){const t=l.qc(4);l.Ab(2),l.kc("ngIf",e.jobList)("ngIfElse",t),l.Ab(4),l.kc("length",e.jobList?e.jobList.length:0)("pageSize",e.pageSize)("pageSizeOptions",l.mc(5,N))}},directives:[r.k,a.a,b.a,b.c,r.j,i.a,i.f,i.c,i.b,k,s.a,c.c,x.b],pipes:[r.r,F.a],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}[_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]   .jobList-container[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:5px;flex:1 0 auto;display:flex;flex-direction:column}[_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]   .jobList-container[_ngcontent-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{height:100%;width:100%;flex:1 0 auto;display:flex;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]   .jobList-container[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]{padding:5px}[_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]   .jobList-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .jobList-wrapper[_ngcontent-%COMP%]   .jobList-paginator[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let J=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},imports:[[c.d.forChild(D)],c.d]}),t})();var B=n("C5ve"),Z=n("iTUp");let G=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},imports:[[r.c,J,i.e,s.c,a.b,o.a,x.a,B.a,Z.a]]}),t})()}}]);