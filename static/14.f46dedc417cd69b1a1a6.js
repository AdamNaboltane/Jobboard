(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{cRhG:function(e,r,t){"use strict";t.r(r),t.d(r,"ProfileModule",(function(){return M}));var o=t("SVse"),i=t("s7LF"),a=t("8Y7J"),n=t("lGQG"),s=t("qfBg"),l=t("zHaW"),m=t("Q2Ze"),p=t("e6WT"),f=t("bOtU"),c=t("Dxy4");function b(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," Please enter a valid email address "),a.Qb())}function u(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," Email is "),a.Rb(2,"strong"),a.Cc(3,"required"),a.Qb(),a.Qb())}function d(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," Password is "),a.Rb(2,"strong"),a.Cc(3,"required"),a.Qb(),a.Qb())}function h(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," First name is "),a.Rb(2,"strong"),a.Cc(3,"required"),a.Qb(),a.Qb())}function g(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," Last name is "),a.Rb(2,"strong"),a.Cc(3,"required"),a.Qb(),a.Qb())}function C(e,r){1&e&&(a.Rb(0,"mat-error"),a.Cc(1," Invalid informations! "),a.Qb())}let w=(()=>{class e{constructor(e,r,t){this.auth=e,this.user=r,this.snackBar=t,this.profileForm=new i.d({firstName:new i.b("",[i.p.required]),lastName:new i.b("",[i.p.required]),email:new i.b("",[i.p.required,i.p.email]),phone:new i.b("",[i.p.pattern("[0-9\\s]{10}")]),password:new i.b("")}),this.invalidUpdate=!1}ngOnInit(){this.getUserInfos()}getUserInfos(){this.user.getUser(this.auth.userInfos.id).subscribe(e=>{this.auth.userInfos=e,this.profileForm.get("firstName").setValue(e.f_name),this.profileForm.get("lastName").setValue(e.l_name),this.profileForm.get("email").setValue(e.email),this.profileForm.get("phone").setValue(e.phone)})}updateProfile(){const e=this.profileForm.value;this.invalidUpdate=!1,this.user.updateUser({id:this.auth.userInfos.id,f_name:e.firstName,l_name:e.lastName,email:e.email,phone:e.phone,access:null,password:e.password}).subscribe(e=>{e?(this.getUserInfos(),this.snackBar.open("Successfully updated your profile!","Dismiss",{duration:2e3})):this.invalidUpdate=!0},e=>this.invalidUpdate=!0)}}return e.\u0275fac=function(r){return new(r||e)(a.Lb(n.a),a.Lb(s.a),a.Lb(l.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-profile"]],decls:33,vars:8,consts:[[1,"profile-wrapper","mat-elevation-z6"],[1,"profile-form",3,"formGroup","ngSubmit"],["matInput","","formControlName","email","placeholder","Ex. mrodrigue@outlook.com"],[4,"ngIf"],["type","password","matInput","","formControlName","password","placeholder","Your password"],["matInput","","formControlName","firstName","placeholder","Michel"],["matInput","","formControlName","lastName","placeholder","Rodrigue"],["matInput","","formControlName","phone","placeholder","06 12 34 56 78","mask","00 00 00 00 00"],[1,"button-wrapper"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(e,r){1&e&&(a.Rb(0,"div",0),a.Rb(1,"h1"),a.Cc(2,"Your profile"),a.Qb(),a.Rb(3,"form",1),a.Zb("ngSubmit",(function(){return r.updateProfile()})),a.Rb(4,"mat-form-field"),a.Rb(5,"mat-label"),a.Cc(6,"Email"),a.Qb(),a.Mb(7,"input",2),a.Ac(8,b,2,0,"mat-error",3),a.Ac(9,u,4,0,"mat-error",3),a.Qb(),a.Rb(10,"mat-form-field"),a.Rb(11,"mat-label"),a.Cc(12,"Password"),a.Qb(),a.Mb(13,"input",4),a.Ac(14,d,4,0,"mat-error",3),a.Qb(),a.Rb(15,"mat-form-field"),a.Rb(16,"mat-label"),a.Cc(17,"First name"),a.Qb(),a.Mb(18,"input",5),a.Ac(19,h,4,0,"mat-error",3),a.Qb(),a.Rb(20,"mat-form-field"),a.Rb(21,"mat-label"),a.Cc(22,"Last name"),a.Qb(),a.Mb(23,"input",6),a.Ac(24,g,4,0,"mat-error",3),a.Qb(),a.Rb(25,"mat-form-field"),a.Rb(26,"mat-label"),a.Cc(27,"Phone (optional)"),a.Qb(),a.Mb(28,"input",7),a.Qb(),a.Ac(29,C,2,0,"mat-error",3),a.Rb(30,"div",8),a.Rb(31,"button",9),a.Cc(32,"Update my profile"),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.Ab(3),a.kc("formGroup",r.profileForm),a.Ab(5),a.kc("ngIf",r.profileForm.get("email").hasError("email")&&!r.profileForm.get("email").hasError("required")),a.Ab(1),a.kc("ngIf",r.profileForm.get("email").hasError("required")),a.Ab(5),a.kc("ngIf",r.profileForm.get("password").hasError("required")),a.Ab(5),a.kc("ngIf",r.profileForm.get("firstName").hasError("required")),a.Ab(5),a.kc("ngIf",r.profileForm.get("lastName").hasError("required")),a.Ab(5),a.kc("ngIf",r.invalidUpdate),a.Ab(2),a.kc("disabled",r.profileForm.invalid))},directives:[i.q,i.k,i.e,m.c,m.f,p.a,i.a,i.j,i.c,o.k,f.a,c.b,m.b],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%], [_nghost-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]{width:50%;min-width:300px;background-color:#fff}[_nghost-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var R=t("iInd");const Q=[{path:"",component:w}];let I=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(r){return new(r||e)},imports:[[R.d.forChild(Q)],R.d]}),e})(),M=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(r){return new(r||e)},imports:[[o.c,I,i.f,i.o,f.b.forRoot(),p.b,c.c]]}),e})()}}]);